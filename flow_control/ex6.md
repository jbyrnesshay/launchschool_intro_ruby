the function definition is not closed with the keyword 'end'
this is necessary to complete the method declaration
ruby does not expect the file, whose code is the input, to be missing 'end', and thus the 'unexpected end-of-input'
the end which does appear in the code is closing the if statement not the function declaration
another 'end' placed after if...else...end will fix the error